---
title: 作用域和闭包
date: 2021-05-10 07:44:54
tags: ['你不知道的js读书笔记','作用域和闭包']
categories : js
toc: true
---
### 作用域是什么？

#### 前置知识——编译原理
js的编译发生在执行前几微妙，所有代码在执行之前都要进行编译。在编译阶段会预先确定变量、函数定义的位置，确保在执行过程中能快速的找到它。   

**编译步骤:**
1. 词法分析: 将由字符组成的字符串分解成有意义的代码块（词法单元)  
eg:var a=2; 将被分解成: var、a 、= 、2 、;
2. 语法分析: 将词法单元流转成抽象语法树(AST)
3. 代码生成: 将AST转成可执行代码的过程叫做代码生成


####  思考个问题 ```var a=2;```程序处理的过程是什么样子的?
1. 解析器会将这段程序分解成词法单元
2. 将词法单元解析成AST  
3. 编译器开始进行代码生成
   3.1 编译器遇到 var a,编译器会询问作用域是否已经存在该名称的变量，存在则忽略，不存在则在当前作用域中声明一个新变量，并命名为a   
   3.2 编译器为引擎生成运行时所需的代码
4. 运行时，引擎在作用域中查找该变量，找到则赋值，没找到则抛出异常



### 词法作用域  


### 函数作用域和块作用域 

### 提升


### 作用域闭包

